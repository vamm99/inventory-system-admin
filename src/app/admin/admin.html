<div class="flex h-screen bg-gray-50">
  <!-- Overlay para móvil -->
  @if (isSidebarOpen) {
  <div class="fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden" (click)="toggleSidebar()"></div>
  }

  <!-- Sidebar -->
  <aside
    [class]="
      'fixed lg:static inset-y-0 left-0 z-50 flex flex-col w-64 bg-white border-r border-gray-200 transform transition-transform duration-300 ease-in-out ' +
      (isSidebarOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0')
    "
  >
    <!-- Logo/Header -->
    <div class="flex items-center justify-between h-16 px-4 border-b border-gray-200">

      <div class="flex justify-center w-full">
        <img src="icono.png" alt="icono" width="50">
      </div>
      <button (click)="toggleSidebar()" class="lg:hidden text-gray-500 hover:text-gray-700">
        <lucide-icon [img]="icons.chevronDown" class="size-6 rotate-90"></lucide-icon>
      </button>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 overflow-y-auto p-4">
      <ul class="space-y-1">
        <!-- Items del menú principal -->
        @for (item of menuItems; track item.path) {
        <li>
          <a
            [routerLink]="item.path"
            routerLinkActive="bg-gray-100 text-gray-700"
            (click)="toggleSidebar()"
            class="flex items-center gap-2 rounded-lg px-4 py-2 text-gray-500 hover:bg-gray-100 hover:text-gray-700 transition-colors"
          >
            <lucide-icon [img]="item.icon" class="size-5 opacity-75"></lucide-icon>
            <span class="text-sm font-medium">{{ item.label }}</span>
          </a>
        </li>
        }

        <!-- Dropdown de Account -->
        <li>
          <details class="group [&_summary::-webkit-details-marker]:hidden">
            <summary
              class="group flex items-center justify-between rounded-lg px-4 py-2 text-gray-500 hover:bg-gray-100 hover:text-gray-700 cursor-pointer transition-colors"
            >
              <div class="flex items-center gap-2">
                <lucide-icon [img]="icons.account" class="size-5 opacity-75"></lucide-icon>
                <span class="text-sm font-medium">Cuenta</span>
              </div>

              <span class="shrink-0 transition duration-300 group-open:-rotate-180">
                <lucide-icon [img]="icons.chevronDown" class="size-5"></lucide-icon>
              </span>
            </summary>

            <ul class="mt-2 space-y-1 px-4">
              @for (dropdownItem of accountDropdownItems; track dropdownItem.label) {
              <li>
                @if (dropdownItem.action) {
                <button
                  type="button"
                  (click)="handleDropdownClick(dropdownItem, $event)"
                  class="w-full rounded-lg px-4 py-2 text-left text-sm font-medium text-gray-500 hover:bg-gray-100 hover:text-gray-700 transition-colors"
                >
                  {{ dropdownItem.label }}
                </button>
                } @else {
                <a
                  [routerLink]="dropdownItem.path"
                  class="block rounded-lg px-4 py-2 text-sm font-medium text-gray-500 hover:bg-gray-100 hover:text-gray-700 transition-colors"
                >
                  {{ dropdownItem.label }}
                </a>
                }
              </li>
              }
            </ul>
          </details>
        </li>
      </ul>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 flex flex-col overflow-hidden">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 h-16 flex items-center px-4 lg:px-6">
      <button (click)="toggleSidebar()" class="lg:hidden text-gray-500 hover:text-gray-700 mr-4">
        <lucide-icon [img]="icons.menu" class="size-6"></lucide-icon>
      </button>
      <h2 class="text-lg font-semibold text-gray-800">LA TERRAZA GASTRO-BAR</h2>
    </header>

    <!-- Content Area -->
    <div class="flex-1 overflow-y-auto p-4 lg:p-6">
      <router-outlet />
    </div>
  </main>
</div>
